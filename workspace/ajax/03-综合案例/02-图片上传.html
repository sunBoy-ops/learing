<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>图片上传</title>
  </head>
  <body>
    <input type="file" name="" id="img-file" />
    <img src="" alt="" class="my-img" />
  </body>
  <script src="../axios.js"></script>
  <script>
    // 上传图片 1.通过选择文件标签 获取文件对象 2.再转为服务器要求的formData 对象 3.发送上传图片请求 4.在页面上对图片进行渲染
    // 1.添加change 事件 获取图片对象
    document.querySelector('#img-file').addEventListener('change', (e) => {
      // console.log(e.target.files[0]);
      // 2.
      let fd = new FormData();
      fd.append('img', e.target.files[0]);
      console.log(fd);
      // 3.
      axios({
        url: 'https://hmajax.itheima.net/api/uploadimg',
        method: 'POST',
        data: fd,
      }).then((result) => {
        // 4.
        let imgData = result.data.data.url;
        document.querySelector('.my-img').src = imgData;
      });
    });
  </script>
</html>
